# Various methods to find API Endpoints.

<pre>1. Running web-app through proxy.</pre>
<pre>2. Scanning for js files.</pre>
<pre>3. Using different http methods (get, post, delete, put).</pre>
<pre>4. Developer Docs.</pre>
<pre>5. Application.wadl</pre>
<pre>6. Options and HREF (in response search for href).</pre>
<pre>7. Way Back Machine.</pre>

 ### 1. Running Through proxy
 <pre><b>Note: Browse web app to get more api endpoints.</b></pre>
<pre> 1. Simple method is to check <b>Network</b> Tab in developer tools and filter XHR request.
 2. In burp proxy, select history and check for requests whose response is in either <b>XML</b> or <b>JSON</b> in MIME type.
 3. A Good link on this topic. 
  <a>-https://support.portswigger.net/customer/portal/articles/2898121-using-burp-to-enumerate-a-rest-api</a>
  <a>-https://support.portswigger.net/customer/portal/articles/2898216-using-burp-to-test-a-rest-api</a></pre>
 Note all endpoints in excel sheet.</br>
 E.g. 
 

| Resource     | Method  | Endpoint                         | Params                   | Other Notes                     |
|--------------|---------|----------------------------------|--------------------------|---------------------------------|
| /reset       | GET     | https://api.bank.xyz/reset       | ?id=1253&pass=*****      | Token not used                  |
|              |         | Keep it blank.                   | We might find additional | endpoints                       |
| /login       | POST    | https://api.bank.xyz/login       | username=Test&Pass=***** | No CSRF Token                   |
|              |         | Keep it blank.                   | We might find additional | endpoints                       |
|              |         | Keep it blank.                   | We might find additional | endpoints                       |
|              |         | Keep it blank.                   | We might find additional | endpoints                       |
| /user        | POST    | https://api.bank.xyz/user        | id=1253                  | Returns token in response       |
| /user/credit | PUT     | https://api.bank.xyz/user/credit | id=1253&credit=100000    | credits 10000                   |
|              |         | Keep it blank.                   | We might find additional | endpoints                       |
|              |         | Keep it blank.                   | We might find additional | endpoints                       |
 
 ### 2. Scanning js files
 <pre>Find additional endpoints which got missed during scanning through proxy and add it to excel sheet.
 JS files might have hidden endpoints which are not accessible to current role.</pre>
 
 <pre>Methodology:
 1. Find all js files using burp.
 2. Find keywords which are addressable resources, found while running through proxy.
 3. Another method to find api in js files is to get js files,
    then use js beautifier and search for HTTP methods in that files.
    E.g. <b>GET</b> or <b>POST</b>.
 4. Also search for <b>$http.</b> or <b>XMLHttpRequest</b> in js files. 
    The XMLHttpRequest is just additonal task, but might give addtional end points.</pre>      
 
 ### 3. Using different http methods (get, post, delete, put)
 <pre>It is important to know how many http methods are actually implemented and out of which how may
 are documented. This might uncover vulnerability. It is a kind of low hanging fruit.</pre>
 <pre>1. Fire options method on each endpoint, found earlier. It does'nt matter even if returns 404.
   We might not have access to those endpoints but those endpoints exists.
2. Find all allowed request methods.
3. Find implemented request methods on endpoints.</pre>

<pre> First try <b>options</b> method, if it returns <b>allow: methods_allowed</b>, then note it down in our excel sheet.
    Try with each seperate options such as <b>get</b> if nothing returned, 
    server defintely returns error, sometime <b>method not implemented</b>
      </pre>
      
 ### 4. Developer Docs
  <pre>Documents for building third party apps by consuming first party web apps data.</pre>
  <pre>Easy to find api endpoints which are accessible for thirdpaty, mostly this endpoints are also accessible by 
our web applicaiton or by mobile application. Note down all endpoints from developer docs.</pre>
 
 
 ### 5. Application.wadl
 <pre>Java based web apps have this file application.wadl.
This file is used by developers as reference. This will have all endpoints.</pre>
<pre>It is accessible from root directory. <b>api.bank.xyz/application.wadl</b>
</pre> 
 ### 6. Options and HREF
 <pre>In this step check for respons by firing OPTIONS and GET methods.</pre>
 <pre>Fire OPTIONS method on endpoint, sometime it may return XML data which may have additional
endpoints and also result for OPTIONS method.
Search for HREF word in response, it may uncover additional endpoints.</pre>  
 
 ### 7. Way Back Machine
 <pre>Use this step to uncover addtional endpoints which did'nt got covered in current document 
but were implemented earlier.
Here we check if some unused api still there and might be vulnerable.</pre>